### 报表

|序号| 接口               |路径       |方法 |
|:---|:-----------------|:----------|:----|
|   1|[获取所有用户信息](#获取所有用户信息)       |/api/users     |GET|
|   2|[创建用户](#创建用户)       |/api/users      |POST|
|   3|[修改用户](#修改用户)       |/api/users/:id   | PUT|
|   4|[删除用户](#删除用户)       |/api/users/:id   |DELETE|
|   5|[关注用户、取消关注](#关注用户、取消关注)       |/api/users/:id/follow   | PUT|
|   6|[获取用户关系列表](#获取用户关系列表)       |/api/relation   | GET|


#### 获取所有用户信息

|接口   | /api/users|
|:------|:----------:|
|方法    |GET  |
|HTTP返回值|200 |
|入参    |详见入参|
|返回值  |相应数据|
|下一步骤|等待用户选择下一步操作|

入参示例: url 形式

~~~json
{
  "name":  "用户姓名", // 用户姓名，完全匹配，用于输入用户姓名返回附近的好友过滤
  "maxDistance": 10000, // 最大检索距离，单位 m，默认：10000m
}
~~~

返回示例:

~~~json
{
    "status": "ok",
    "data": [
      {
        "_id": "611f5fbec1164a268a1b972a",  // 用户序号
        "name": "测试001",  // 用户姓名
        "dob": "2021-07-29",  // 用户生日
        "address": "浙江省杭州市余杭区良渚街道", // 用户住址
        "description": "测试 - 001", 
        "id": "fd5438ed-b641-4911-af06-2a1b1bc55e40", // 用户编号
        "createdAt": "2021-08-20T07:54:38.069Z",  // 用户注册时间
        "location": { // 用户定位
            "type": "Point", 
            "coordinates": [ // 经纬度
                120.046944, 
                30.380212
            ]
        }, 
        "relation": { // 关注关系
            "_id": "6123cf34cd36b6dac57f1c75", // 关系序号
            "is_mutual": true,  // 是否互为关注，是即朋友关系
            "follower": "611f5fbec1164a268a1b972a", // 被关注者
            "owner": "6123cf13cd36b6dac57f1c57", // 关注者
            "createdAt": "2021-08-23T16:39:16.518Z", // 关注时间
        }
      },
      //...
    ]
}
~~~

#### 创建用户

|接口   | /api/users |
|:------|:----------:|
|方法    | POST  |
|HTTP返回值|200 |
|入参    |详见入参|
|返回值  |相应数据|
|下一步骤|等待用户选择下一步操作|

入参示例:

~~~json
{

  "name": "测试001", // 姓名
  "dob": "2021-08-27", // 生日
  "description": "测试 - 004", // 简介
  "address": "北京市朝阳区", // 地址
  "location": "120.046944,30.380212", // 定位
}
~~~

返回示例:

~~~json
{
    "status": "ok",
    "data": {
        "_id": "612476d43e6c93e6fc0d3a9a",  // 用户序号
        "name": "测试001", // 姓名
        "dob": "2021-08-27",  // 生日
        "description": "测试 - 004",  // 简介
        "address": "北京市朝阳区",  // 地址
        "id": "b148a9ac-9641-4f74-b868-d57ad2e88e06",  // 用户编号
        "createdAt": "2021-08-24T04:34:28.036Z",  // 创建时间
        "location": { // 定位
          "type": "Point", 
          "coordinates": [ // 经纬度
            120.046944, 
            30.380212
          ]
        }, 
    }
}
~~~


#### 修改用户

|接口   | /api/users/:id |
|:------|:----------:|
|方法    |  PUT  |
|HTTP返回值|200 |
|入参    |详见入参|
|返回值  |相应数据|
|下一步骤|等待用户选择下一步操作|

入参示例:

~~~json
{

  "name": "测试001", // 姓名
  "dob": "2021-08-27", // 生日
  "description": "测试 - 004", // 简介
  "address": "北京市海定区上地十街10号", // 地址
  "location": "116.300915,40.050857", // 定位
}
~~~

返回示例:

~~~json
{
    "status": "ok",
    "data": {
        "_id": "612476d43e6c93e6fc0d3a9a",  // 用户序号
        "name": "测试001", // 姓名
        "dob": "2021-08-27",  // 生日
        "description": "测试 - 004",  // 简介
        "address": "北京市朝阳区",  // 地址
        "id": "b148a9ac-9641-4f74-b868-d57ad2e88e06",  // 用户编号
        "createdAt": "2021-08-24T04:34:28.036Z",  // 创建时间
        "location": { // 定位
          "type": "Point", 
          "coordinates": [ // 经纬度
            120.046944, 
            30.380212
          ]
        }, 
    }
}
~~~


#### 删除用户

|接口   | /api/users/:id |
|:------|:----------:|
|方法    |  DELETE  |
|HTTP返回值|200 |
|入参    |详见入参|
|返回值  |相应数据|
|下一步骤|等待用户选择下一步操作|

入参示例:

无

返回示例:

~~~json
{
    "status": "ok",
    "data": {
        "_id": "612476d43e6c93e6fc0d3a9a",  // 用户序号
        "name": "测试001", // 姓名
        "dob": "2021-08-27",  // 生日
        "description": "测试 - 004",  // 简介
        "address": "北京市朝阳区",  // 地址
        "id": "b148a9ac-9641-4f74-b868-d57ad2e88e06",  // 用户编号
        "createdAt": "2021-08-24T04:34:28.036Z",  // 创建时间
        "location": { // 定位
          "type": "Point", 
          "coordinates": [ // 经纬度
            120.046944, 
            30.380212
          ]
        }, 
    }
}
~~~

#### 关注用户、取消关注

|接口   | /api/users/:id/follow |
|:------|:----------:|
|方法    |  PUT  |
|HTTP返回值|200 |
|入参    |详见入参|
|返回值  |相应数据|
|下一步骤|等待用户选择下一步操作|

入参示例:

无

返回示例:

~~~json
{
    "status": "ok",
}
~~~


#### 获取用户关系列表

|接口   | /api/users|
|:------|:----------:|
|方法    |GET  |
|HTTP返回值|200 |
|入参    |详见入参|
|返回值  |相应数据|
|业务场景|用户登记|
|下一步骤|等待用户选择下一步操作|

入参示例: url 形式

~~~json
{
  "type":  "following", // 关系类型：following 我关注的、follower 关注我的、friends 互为关注的
}
~~~

返回示例:

~~~json
{
    "status": "ok",
    "data": [
      {
        "is_mutual": true, // 是否互为关注，即朋友
        "_id": "6123cf34cd36b6dac57f1c75", // 关系表序号
        "follower": { // 被关注者
          "location": { // 被关注者位置
              "type": "Point", 
              "coordinates": [
                  120.046944, 
                  30.380212
              ]
          }, 
          "_id": "611f5fbec1164a268a1b972a", // 被关注者序号
          "name": "测试001", // 被关注者姓名
          "dob": "2021-07-29", // 被关注者生日
          "address": "浙江省杭州市余杭区良渚街道", // 被关注者地址
          "description": "测试 - 001", // 被关注者简介
          "id": "fd5438ed-b641-4911-af06-2a1b1bc55e40", // 被关注者编号
          "createdAt": "2021-08-20T07:54:38.069Z", // 被关注者创建时间
        }, 
        "owner": { // 关注者
          "location": { // 关注者位置
              "type": "Point", 
              "coordinates": [
                  120.151299, 
                  30.311444
              ]
          }, 
          "_id": "6123cf13cd36b6dac57f1c57", // 关注者序号
          "id": "64b4b5dc-36b4-445e-bd97-ff42125fe3a9", // 关注者编号
          "name": "越剑", // 关注者姓名
          "createdAt": "2021-08-23T16:38:43.910Z", // 关注者创建时间
          "address": " 浙江省杭州市拱墅区祥园路", // 关注者地址
          "description": "越剑 GitHub", // 关注者简介
          "dob": "2021-08-20" // 关注者生日
        }, 
        "createdAt": "2021-08-23T16:39:16.518Z", // 关注时间
      }, 
      //...
    ]
}
~~~

